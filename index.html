<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Discernment Flow Chart</title>
<style>
  body { font-family: Arial, sans-serif; background: #f7f7f7; margin:0; padding:0; }
  .container { max-width: 650px; margin:auto; padding:20px; }
  .top-bar { display:flex; justify-content:space-between; margin-bottom:10px; }
  .card {
    background:#fff; padding:20px; border-radius:8px;
    box-shadow:0 2px 6px rgba(0,0,0,0.1); min-height:280px;
    display:flex; flex-direction:column; justify-content:space-between;
  }
  .segment-heading {
    font-size:1.4em; font-weight:bold; margin-bottom:15px; padding:8px;
    border-bottom:2px solid #ddd; display:flex; align-items:center; gap:8px;
    transition: background-color .5s ease, color .5s ease;
  }
  .flash-gold { background-color:gold !important; color:#fff !important; }
  .text { font-size:1.2em; margin-bottom:12px; white-space:pre-wrap; }

  .examples-toggle, .risk-toggle, .reasoning-toggle { margin:8px 0 12px 0; display:flex; gap:8px; flex-wrap:wrap; }
  .panel {
    display:none; border:1px solid #eee; border-radius:6px; padding:10px; background:#fafafa;
  }
  .panel p { margin:6px 0; }
  .panel img { width:100%; height:auto; display:block; }

  .buttons { display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-start; }
  .buttons.center { justify-content:center; }

  button { flex:1; padding:10px; font-size:1em; border:none; border-radius:5px; cursor:pointer; }
  button.yes { background:#4CAF50; color:#fff; }
  button.no { background:#F44336; color:#fff; }
  button.next { background:#2196F3; color:#fff; }
  button.back { background:#555; color:#fff; flex:0 0 auto; }               /* darker */
  button.restart { background:#9C27B0; color:#fff; flex:0 0 auto; }
  button.examples-btn, button.viz-btn, button.risk-btn, button.reasoning-btn { background:#9E9E9E; color:#fff; flex:0 0 auto; } /* lighter */
  button.active { outline: 2px solid #000; }

  .risk-panel { display:none; border:1px solid #eee; border-radius:6px; padding:10px; background:#fafafa; }
  .risk-row { display:flex; align-items:center; gap:10px; margin:6px 0; }
  .risk-badge { font-weight:bold; padding:3px 6px; border-radius:4px; background:#fff; border:1px solid #ddd; }

  .error { color:#B00020; font-size:0.95em; margin-top:8px; }
</style>
</head>
<body>
<div class="container">
  <div class="top-bar">
    <button class="back" id="backBtn" onclick="goBack()">Back</button>
    <button class="restart" id="restartTop" onclick="restart()">Restart</button>
  </div>

  <div class="card">
